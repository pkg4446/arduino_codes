//최대 전송 문자열 갯수 140, 최대 key 9개
//common: Immediate response
{
    "id":   "<board-id>",   // 제어보드 고유 id
    "ctrl": "receive",
    "cmd":  "ctrl",
    "opt":  "cmd"
}
//common: error response
{
    "id":   "<board-id>",   // 제어보드 고유 id
    "ctrl": "error",
    "cmd":  "ctrl",
    "err":  "err_msg"
}

// relay request example
{
    "ctrl": "relay",
    "cmd":  "onoff",    // onoff, hold
    "num":  1,          // relay number e.g. 1번 relay, unsigned char (0 to 255), relay number e.g. (1~7 relay)
    "opt":  1000        // onoff: unsigned short 0 to 65,535, e.g. 1000 ms, // hold: bool
}
// relay response, onoff
{"ctrl":"relay","cmd":"onoff","num":2,"opt": 1000}
{
    "id":   "<board-id>",   // 제어보드 고유 id
    "ctrl": "relay",
    "cmd":  "onoff",
    "num":  3,
    "opt":  1001            // 실제 릴레이 작동시간(시스템 시간상 +2 miili sec 정도 차이가 날 수 있음 )
}
// relay response, hold
{"ctrl":"relay","cmd":"hold","num":3,"opt": 1}
{
    "id":   "<board-id>",   // 제어보드 고유 id
    "ctrl": "relay",
    "cmd":  "hold",
    "num":  3,
    "opt":  true            // bool
}

// sensor read request
{
    "ctrl": "sensor",
    "cmd":  "read"
}
// sensor read response
{"ctrl":"sensor","cmd":"read"}
{
    "id":   "<board-id>",     // 제어보드 고유 id
    "ctrl": "sensor_read",
    "cmd":  "read",
    "opt":  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], //배열 순서대로 0~15번 센서값 0:false,1:true
}

// step motor ctrl request "set"
{
    "ctrl":  "motor",
    "cmd":   "set",
    "opt":   1,   //0내장 드라이버, 1외장드라이버(MD5-HD14)
    "num":   1,   // motor type e.g. 1번 모터 // 0 to 255
    "accel": 10,  //가속 구간 스탭 수 unsigned int16 - 0 to 65535
    "decel": 5,   //감속 구간 스탭 수 unsigned int16 - 0 to 65535
    "dla_s": 1,  //unsigned int 16, 모터 스탭간격 micro sec, delay_short
    "dla_l": 100 //unsigned int 16, 모터 스탭간격 micro sec, delay_long > delay_short    
}
{"ctrl":"motor","cmd":"set","opt":0,"num":1,"accel":10,"decel":5,"dla_s":1,"dla_l":100}
// step motor ctrl response "set"
{
    "id":"foletto_2nd_f",
    "ctrl":"motor",
    "cmd":"set",
    "opt":false,
    "num":1,
    "accel":10,
    "decel":5,
    "dla_s":1,
    "dla_l":100
}

// step motor ctrl request "run" (사용 전, 후, relay status change로 반드시 브레이크 off, on)
{
    "ctrl":  "motor",
    "cmd":   "run",
    "opt":   1,   //0내장 드라이버, 1외장드라이버(MD5-HD14)
    "num":   1,   // motor type e.g. 1번 모터 // 0 to 255
    "step":  100,  //스탭 수 (n 스탭당 1회전) unsigned int32 - 0 to 4294967295        
    "dir":   1,   //step motor direction (CW/CCW), 0:CW, 1:CCW
    "limit": 4,   //모터 진행방향 리미트센서 번호 = sensor_read 번호, 16이상일 경우 인식 안함.
    "max":   1000 //unsigned int 36, 가동 최대 거리 //리미트 한쪽에만 있을 경우, 리미트 인식 후 pos가 0이 되고, 이후 최대 max 까지만 회전
}
{"ctrl":"motor","cmd":"run","opt":0,"num":1,"step":100,"dir":1,"limit":4,"max":1000}
// step motor ctrl response "run"
{
    "id":   "<board-id>", // 제어보드 고유 id
    "ctrl": "motor",
    "cmd":  "run",
    "opt":  false,
    "num":  1,
    "zero": false,
    "pos":  100
}

// step motor ctrl response
{
    "id":     "<board-id>", // 제어보드 고유 id
    "ctrl":   "step_motor",
    "driver": 1,
    "type":   1,
    "zero":   false,        // 영점 확인 여부
    "pos":    999           // 모터 위치
}

// step motor config request
{
    "ctrl": "motor_config",
    "driver": 1, //0:내장 드라이버, 1:외장드라이버(MD5-HD14)
    "type":   1, //motor type e.g. 1번 모터 // 0 to 255
    "method": 0, //0:get, 1:set
    "step":   99999, //method=1 일 경우, unsigned int32 - 0 to 4294967295 하단 리미트에서 상단 리미트 센서까지의 스탭 수.
}

//스탭모터의 동작 스탭이 가속, 감속 스탭의 합보다 작은경우의 처리 추가해야함.

//하단 리미트에서 상단 리미트 센서까지의 스탭 측정 기능 추가 예정
//스탭모터 리미트 사용하지 않는 경우는 센서 번호 >= 16
//외부 드라이버(MD5-HD14)의 경우 단독으로만 작동 가능. 작동하는동안 외부 간섭 불가
//hx720 센서를 이용한 로드셀 사용 기능 추가 예정
//-(로드셀 추가를 위해서 테스트용 하드웨어 구성이 필요함)